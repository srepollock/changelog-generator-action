name: Changelog Generator
on:
  pull_request:
    branches:
      - master

jobs:
  generate:
      name: Changelog Generator
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v2
          with:
              # Needs the entire history of the project to generate. The script handles everything else.
              fetch-depth: 0
        - name: Create changelog
          # Action location goes here. It's in root for this workflow. It may be different for your repo.
          uses: ./
          with:
            REPO_NAME: 'srepollock/changelog-generator-action'
            ACCESS_TOKEN: ${{secrets.GITHUB_TOKEN}}
            PATH: '/CHANGELOG.md'
            COMMIT_MESSAGE: 'docs(CHANGELOG): update release notes'
